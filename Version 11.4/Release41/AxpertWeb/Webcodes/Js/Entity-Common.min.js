/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var dtCulture=eval(callParent("glCulture")),advFilterDtCulture="en-us"==dtCulture?"MM/DD/YYYY":"DD/MM/YYYY",EntityCommon=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isAppManager",value:function(){var e,t,a,o,n,r;return!!callParentNew("isMobile")||"block"==(null===(e=window.top.$.axpertUI)||void 0===e?void 0:null===(t=e.options)||void 0===t?void 0:null===(a=t.axpertUserSettings)||void 0===a?void 0:null===(o=a.settings)||void 0===o?void 0:null===(n=o.axUserOptions)||void 0===n?void 0:null===(r=n.configurationStudio)||void 0===r?void 0:r.display)}},{key:"getInitials",value:function(e){var t="",a=e.split(" ");return 1===a.length?t=1==a[0].length?a[0].charAt(0):a[0].charAt(0)+a[0].charAt(1):2===a.length?t=a[0].charAt(0)+a[1].charAt(0):a.length>=3&&(t=a[0].charAt(0)+a[1].charAt(0)),t.toUpperCase()}},{key:"isEmpty",value:function(e){return""==e}},{key:"isNull",value:function(e){return null==e}},{key:"isNullOrEmpty",value:function(e){return null==e||""==e}},{key:"inValid",value:function(e){return null==e||void 0===e||""==e}},{key:"isValid",value:function(e){return!this.inValid(e)}},{key:"isUndefined",value:function(e){return void 0===e}},{key:"setAnalyticsDataWS",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){},o=function(e){$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/SetAnalyticsDataWS",type:"POST",cache:!1,async:!0,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){t&&"function"==typeof t&&t(e.d||e)},error:function(e){console.error("Error in SetAnalyticsDataWS:",e),a&&"function"==typeof a&&a(e)}})};this.isAppManager()&&e.confirmNeeded?($("#confirmationModal").appendTo("body").css("z-index",1100).modal("show"),$("#btnAllUsers").off("click").on("click",function(){e.allUsers=!0,o(e),$("#confirmationModal").modal("hide")}),$("#btnJustMyself").off("click").on("click",function(){e.allUsers=!1,o(e),$("#confirmationModal").modal("hide")})):o(e)}},{key:"getAnalyticsDataWS",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/GetAnalyticsDataWS",type:"POST",cache:!1,async:!0,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){t&&"function"==typeof t&&t(e.d||e)},error:function(e){a&&"function"==typeof a&&a(e)}})}},{key:"setAnalyticsDataSyncWS",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){},o=function(e){$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/SetAnalyticsDataWS",type:"POST",cache:!1,async:!1,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){t&&"function"==typeof t&&t(e.d||e)},error:function(e){console.error("Error in SetAnalyticsDataWS:",e),a&&"function"==typeof a&&a(e)}})};this.isAppManager()&&e.confirmNeeded?($("#confirmationModal").appendTo("body").css("z-index",1100).modal("show"),$("#btnAllUsers").on("click",function(){e.allUsers=!0,o(e),$("#confirmationModal").modal("hide")}),$("#btnJustMyself").on("click",function(){e.allUsers=!1,o(e),$("#confirmationModal").modal("hide")})):o(e)}},{key:"getAnalyticsDataSyncWS",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/GetAnalyticsDataWS",type:"POST",cache:!1,async:!1,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){t&&"function"==typeof t&&t(e.d||e)},error:function(e){a&&"function"==typeof a&&a(e)}})}},{key:"getEntityEditableFlag",value:function(e){var t=!1;return this.callAPI("../aspx/Entity.aspx/GetEntityEditableFlagWS",e,!1,function(e){if(e.success){if(e.response.indexOf("SessionId is not valid")>-1)return parent.window.location="../aspx/sess.aspx",void(t=!0);e.response.indexOf(':\\"T\\"')>-1&&(t=!0)}else t=!1}),t}},{key:"getDataFromDataSource",value:function(e){arguments.length>1&&arguments[1]!==undefined&&arguments[1],arguments.length>2&&arguments[2]!==undefined&&arguments[2];alert("EntityCommon.getDataFromDataSource method is deprecated. Use EntityCommon.getDataFromAxList method or AxInterface.GetDataFromAxList instead.")}},{key:"getDataFromAxList",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};if(!e)throw new Error("Parameter 'data' is required.");if(!Array.isArray(e.adsNames))throw new Error("'adsNames' is required and must be an array.");"undefined"==typeof e.refreshCache&&(e.refreshCache=!1),"undefined"==typeof e.keyField&&(e.keyField=""),"undefined"==typeof e.keyValue&&(e.keyValue=""),"undefined"==typeof e.sqlParams&&(e.sqlParams={}),"undefined"==typeof e.props&&(e.props={}),$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/AxPEG.aspx/GetDataFromAxList",type:"POST",cache:!1,async:!0,dataType:"json",data:JSON.stringify(e),contentType:"application/json",success:function(e){t&&"function"==typeof t&&t(e.d||e)},error:function(e){a&&"function"==typeof a&&a(e)}})}},{key:"getDatesBasedonSelection",value:function(e){var t={from:"",to:""},a="en-us"==dtCulture?"MM/DD/YYYY":"DD/MM/YYYY";switch(e){case"customOption":break;case"todayOption":var o=new Date;t.from=t.to=moment(o).format(a);break;case"yesterdayOption":(o=new Date).setDate(o.getDate()-1),t.from=t.to=moment(o).format(a);break;case"tomorrowOption":(o=new Date).setDate(o.getDate()+1),t.from=t.to=moment(o).format(a);break;case"this_weekOption":o=this.getFirstDayOfWeek(new Date);t.from=moment(o).format(a),o.setDate(o.getDate()+6),t.to=moment(o).format(a);break;case"last_weekOption":(o=this.getFirstDayOfWeek(new Date)).setDate(o.getDate()-7),t.from=moment(o).format(a),o.setDate(o.getDate()+6),t.to=moment(o).format(a);break;case"next_weekOption":(o=this.getFirstDayOfWeek(new Date)).setDate(o.getDate()+7),t.from=moment(o).format(a),o.setDate(o.getDate()+6),t.to=moment(o).format(a);break;case"this_monthOption":(o=this.getFirstDayOfWeek(new Date)).setDate(1),t.from=moment(o).format(a),o.setMonth(o.getMonth()+1),o.setDate(0),t.to=moment(o).format(a);break;case"last_monthOption":(o=this.getFirstDayOfWeek(new Date)).setDate(1),o.setMonth(o.getMonth()-1),t.from=moment(o).format(a),o.setMonth(o.getMonth()+1),o.setDate(0),t.to=moment(o).format(a);break;case"next_monthOption":(o=this.getFirstDayOfWeek(new Date)).setDate(1),o.setMonth(o.getMonth()+1),t.from=moment(o).format(a),o.setMonth(o.getMonth()+1),o.setDate(0),t.to=moment(o).format(a);break;case"this_quarterOption":o=new Date;var n=Math.floor((o.getMonth()+3)/3);o.setDate(1),o.setMonth(3*n-3),t.from=moment(o).format(a),o.setMonth(o.getMonth()+3),o.setDate(0),t.to=moment(o).format(a);break;case"last_quarterOption":o=new Date;0==(n=Math.floor((o.getMonth()+3)/3)-1)&&(n=4,o.setFullYear(o.getFullYear()-1)),o.setDate(1),o.setMonth(3*n-3),t.from=moment(o).format(a),o.setMonth(o.getMonth()+3),o.setDate(0),t.to=moment(o).format(a);break;case"next_quarterOption":o=new Date;5==(n=Math.floor((o.getMonth()+3)/3)+1)&&(n=1,o.setFullYear(o.getFullYear()+1)),o.setDate(1),o.setMonth(3*n-3),t.from=moment(o).format(a),o.setMonth(o.getMonth()+3),o.setDate(0),t.to=moment(o).format(a);break;case"this_yearOption":(o=new Date).setDate(1),o.setMonth(0),t.from=moment(o).format(a),o.setFullYear(o.getFullYear()+1),o.setMonth(0),o.setDate(0),t.to=moment(o).format(a);break;case"last_yearOption":(o=new Date).setFullYear(o.getFullYear()-1),o.setDate(1),o.setMonth(0),t.from=moment(o).format(a),o.setFullYear(o.getFullYear()+1),o.setMonth(0),o.setDate(0),t.to=moment(o).format(a);break;case"next_yearOption":(o=new Date).setFullYear(o.getFullYear()+1),o.setDate(1),o.setMonth(0),t.from=moment(o).format(a),o.setFullYear(o.getFullYear()+1),o.setMonth(0),o.setDate(0),t.to=moment(o).format(a)}return t}},{key:"getDatesBasedonSelectionForBetweenFilter",value:function(e){var t={from:"",to:""};switch(e){case"customOption":break;case"todayOption":var a=new Date;t.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"yesterdayOption":(a=new Date).setDate(a.getDate()-1),t.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"tomorrowOption":(a=new Date).setDate(a.getDate()+1),t.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"this_weekOption":a=this.getFirstDayOfWeek(new Date);t.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+7),t.to=moment(a).format("DD-MMM-YYYY");break;case"last_weekOption":(a=this.getFirstDayOfWeek(new Date)).setDate(a.getDate()-7),t.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+7),t.to=moment(a).format("DD-MMM-YYYY");break;case"next_weekOption":(a=this.getFirstDayOfWeek(new Date)).setDate(a.getDate()+7),t.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+7),t.to=moment(a).format("DD-MMM-YYYY");break;case"this_monthOption":(a=this.getFirstDayOfWeek(new Date)).setDate(1),t.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+1),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"last_monthOption":(a=this.getFirstDayOfWeek(new Date)).setDate(1),a.setMonth(a.getMonth()-1),t.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+1),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"next_monthOption":(a=this.getFirstDayOfWeek(new Date)).setDate(1),a.setMonth(a.getMonth()+1),t.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+1),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"this_quarterOption":a=new Date;var o=Math.floor((a.getMonth()+3)/3);a.setDate(1),a.setMonth(3*o-3),t.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+3),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"last_quarterOption":a=new Date;0==(o=Math.floor((a.getMonth()+3)/3)-1)&&(o=4,a.setFullYear(a.getFullYear()-1)),a.setDate(1),a.setMonth(3*o-3),t.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+3),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"next_quarterOption":a=new Date;5==(o=Math.floor((a.getMonth()+3)/3)+1)&&(o=1,a.setFullYear(a.getFullYear()+1)),a.setDate(1),a.setMonth(3*o-3),t.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+3),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"this_yearOption":(a=new Date).setDate(1),a.setMonth(0),t.from=moment(a).format("DD-MMM-YYYY"),a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"last_yearOption":(a=new Date).setFullYear(a.getFullYear()-1),a.setDate(1),a.setMonth(0),t.from=moment(a).format("DD-MMM-YYYY"),a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY");break;case"next_yearOption":(a=new Date).setFullYear(a.getFullYear()+1),a.setDate(1),a.setMonth(0),t.from=moment(a).format("DD-MMM-YYYY"),a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(a.getDate()+1),t.to=moment(a).format("DD-MMM-YYYY")}return t}},{key:"getFirstDayOfWeek",value:function(e){var t=(e=new Date(e)).getDay(),a=e.getDate()-t+(0==t?-6:1);return new Date(e.setDate(a))}},{key:"callAPI",value:function(e,t,a,o){var n=this,r=new XMLHttpRequest;r.open("POST",e,a),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.isAxpertFlutter&&(r.setRequestHeader("Authorization","Bearer ".concat(armToken)),t.armSessionId=armSessionId),r.onreadystatechange=function(){4==this.readyState&&(200==this.status?o({success:!0,response:this.responseText}):(n.catchError(this.responseText),o({success:!1,response:this.responseText})))},r.send(JSON.stringify(t))}},{key:"catchError",value:function(e){showAlertDialog("error",e)}},{key:"showSuccess",value:function(e){showAlertDialog("success",e)}},{key:"dataConvert",value:function(e,t){if("AXPERT"==t)try{if("undefined"!=typeof(e=JSON.parse(e.d)).result[0].result.row)return e.result[0].result.row;if("undefined"!=typeof e.result[0].result)return e.result[0].result}catch(a){ShowDimmer(!1),this.catchError(a.message)}else if("ARM"==t)try{if(this.isAxpertFlutter||(e=JSON.parse(e.d)),e.result&&e.result.success){if(!this.isUndefined(e.result.data))return e.result.data}else this.isUndefined(e.result.message)||this.catchError(e.result.message)}catch(a){ShowDimmer(!1),this.catchError(a.message)}return e}},{key:"generateFldId",value:function(){return"fid".concat(Date.now()).concat(Math.floor(9e4*Math.random())+1e4)}},{key:"loadHyperLink",value:function(e,t){void 0!==t&&"true"==t&&parent.ShowDimmer(!0),window.top.LoadIframe(e)}},{key:"navigateToUrl",value:function(e){window.top.navigateToUrl(e)}},{key:"replaceSpecialChars",value:function(e){for(var t=e.indexOf("/^^dq");-1!=t;)t=(e=e.replace("/^^dq",'"')).indexOf("/^^dq");for(t=e.indexOf("^^dq");-1!=t;)t=(e=e.replace("^^dq",'"')).indexOf("^^dq");return-1!=e.indexOf(";bkslh")&&(e=e.replace(new RegExp(";bkslh","g"),"\\")),e=(e=e.replace(new RegExp("<br>","g"),"\n")).replace("T00:00:00","")}},{key:"getCardData",value:function(e){var t,a,o,n,r,s;return window.location.href.toLowerCase().indexOf("dashboardtemplate.html")>-1?(null===(t=$.axpertUI_dashboard)||void 0===t?void 0:null===(a=t.dashboardcardsPage)||void 0===a?void 0:null===(o=a.cardsData)||void 0===o?void 0:o[e])||[]:(null===(n=$.axpertUI)||void 0===n?void 0:null===(r=n.cardsPage)||void 0===r?void 0:null===(s=r.cardsData)||void 0===s?void 0:s[e])||[]}}]),e}();function AxGetGlobalVar(){var e="";return $.ajax({url:top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/")+6)+"axinterface.aspx/GetGlobalVar",type:"POST",cache:!1,async:!1,dataType:"json",contentType:"application/json",success:function(t){e=""!=t.d?JSON.parse(t.d):""},error:function(t){e=t}}),e}