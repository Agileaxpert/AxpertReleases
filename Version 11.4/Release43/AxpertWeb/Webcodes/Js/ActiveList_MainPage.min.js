/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function _iterableToArrayLimit(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var s,n,i=[],o=!0,l=!1;try{for(a=a.call(t);!(o=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(c){l=!0,n=c}finally{try{o||null==a["return"]||a["return"]()}finally{if(l)throw n}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}var doTask,armToken="",isActiveTskPopoverVisible=!1,taskActionCheck=!1,AxTasks=function(){function t(){_classCallCheck(this,t),this.isAxpertFlutter=!this.isNullOrEmpty(armToken),this.taskListHtml='\n        <table class="table align-middle  fs-6 gy-5 mb-0 dataTable no-footer task-listing-card" data-process="{{processname}}" data-type="{{tasktype}}" data-taskid="{{taskid}}"  data-transid="{{transid}}" data-keyvalue="{{keyvalue}}">\n            <tbody>\n                <tr class="d-flex ">\n\n                    <td class="d-flex align-items-center task-name">\n                        <div class="d-flex flex-column">\n                            <span class="List_view accordion-icon arrow{{taskid}}" onclick="axTasksObj.toggleTask(\'{{taskid}}\')">\n                                <span class="material-icons material-icons-style material-icons-2">chevron_right</span>\n                            </span>\n                            <input type="checkbox" value="" class="form-check-input task-list-checkbox">\n                            <a href="javascript:void(0)" class="text-gray-800 fw-bold fs-6  mb-1 task-title" title="{{displaytitle}}"><span href="javascript:void(0)" onclick="axTasksObj.openProcess(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\',\'{{taskid}}\')"><span class="material-icons material-icons-style material-icons-1 display-icon task-listing-icons">{{displayicon}}</span>{{displaytitle}}</span></a>\n                            <span class="task-subtitle">{{displaycontent}}</span>\n                        </div>\n                    </td>\n\n                    <td class="d-flex align-items-center MObile-task-more-btns">\n                        <div class="mobile-more-btns">\n                            <button class="btn btn-icon btn-white btn-color-gray-600 btn-active-primary shadow-sm me-2 tb-btn btn-sm" id="Mobile_more-btns">\n                                <span class="material-icons material-icons-style material-icons-2">more_horiz</span>\n\n\n                            </button>\n                                            \n                            <ul class="total-activity">\n                                {{mobile_task_buttons_html}}\n                            </ul>\n                        </div>\n                    </td>\n\n                    <td class="task-right">\n\n                        <div class="d-flex flex-row task-process">\n                            <a href="javascript:void(0)" class="text-gray-800 fs-6 mb-1 task-assignedBy" title="Assigned By"> {{fromuser}}\n                            </a>\n                            <a href="javascript:void(0)" title="Assigned On" class="text-gray-800 fs-6 mb-1 task-date"> {{eventdatetime}}</a>\n                        </div>\n                    </td>\n\n                    <td class="text-end task-more-btns">\n                        <div class="d-flex align-items-center task-more-btns">{{task_buttons_html}}\n                        </div>\n                    </td>\n\n\n\n                </tr>\n                <tr class="taskSubrow{{taskid}} d-none" data-displaymcontent="{{displaymcontent}}">\n                    <td class="task-description">\n                        <span class="more">\n                            \n                        </span>\n                    </td>\n                </tr>                               \n            </tbody>\n        </table>',this.bulkTaskRowHtml='\n        <div class="table align-middle  fs-6 gy-5 mb-0 dataTable no-footer task-listing-card">\n            \n               \n                        <div class="d-flex flex-column task-name">\n                            <input type="checkbox" value="" class="form-check-input task-list-checkbox" data-taskid="{{taskid}}" >\n                            <a href="javascript:void(0)"  class="text-gray-800 fw-bold fs-6  mb-1 task-title" title="{{displaytitle}}"><span href="javascript:void(0)"><span class="material-icons material-icons-style material-icons-1 display-icon task-listing-icons">{{displayicon}}</span>{{displaytitle}}</span></a>\n                            <div class="task-subtitle">{{displaycontent}}</div>\n                        </div>\n                  \n\n                        <div class="d-flex flex-row task-process">\n                            <a href="javascript:void(0)" class="text-gray-800 fs-6 mb-1 task-assignedBy" title="Assigned By"> {{fromuser}}\n                            </a>\n                            <a href="javascript:void(0)" title="Assigned On" class="text-gray-800 fs-6 mb-1 task-date"> {{eventdatetime}}</a>\n                        </div>\n                                      \n           \n        </div>',this.processRowHtml='\n        <div class="d-flex align-items-center HP-ActiveList-Items statusActiveListRow" data-process="{{processname}}" data-type="{{tasktype}}"\n    data-taskid="{{taskid}}" data-transid="{{transid}}" data-keyvalue="{{keyvalue}}">\n            <div class="symbol symbol-50px me-5">\n                <span class="symbol-label">\n                    <img alt="{{processname}}" class=" w-30px" src="../custompages/icons/{{processname}}.png"\n                        onerror="this.onerror=null;this.src=\'../custompages/icons/default.png\';">\n\n                </span>\n            </div>\n            <div class="d-flex align-items-center ">\n                <div class="HP-ActiveList-Items-Details">\n                    <a class="HomeP-ActiveList-Title" title="{{displaytitle}}" href="javascript:void(0)"\n                        onclick="axTasksObj.openProcess(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\',\'{{taskid}}\')">{{displaytitle}}</a>\n                    <span class="HomeP-ActiveList-Desc">{{displaycontent}}</span>\n\n                    <div class="d-flex flex-row task-process" id="ACTLIST-assignee">\n                        <a href="javascript:void(0)" class="text-gray-800 fs-6 mb-1 task-assignedBy" title="Assigned By">\n                            {{fromuser}}\n                        </a>\n                        <a href="javascript:void(0)" title="Assigned On" class="text-gray-800 fs-6 mb-1 task-date">\n                            {{eventdatetime}}</a>\n\n                        <a href="javascript:void(0)" class="ACTLIST_more d-none">Show More</a>\n                    </div>\n\n                    <div class="taskmorecontent taskSubrow{{taskid}} d-none" data-displaymcontent="{{displaymcontent}}">\n                        <div class="task-morecontent">\n                            <span class="more">\n\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="task-actions-sets d-flex">\n                {{task_buttons_html}}\n            </div>\n        </div>',this.reminderRowHtml='\n        <div class="d-flex align-items-center HP-ActiveList-Items statusActiveListRow" data-process="{{processname}}" data-type="{{tasktype}}" data-taskid="{{taskid}}">\n            <div class="symbol symbol-50px me-5">\n                <span class="symbol-label">\n                    <img alt="{{processname}}" class=" w-30px" src="../custompages/icons/reminder.png" onerror="this.onerror=null;this.src=\'../custompages/icons/default.png\';">\n                </span>\n            </div>\n            <div class="d-flex align-items-center "  data-process="{{processname}}" data-type="{{tasktype}}" data-taskid="{{taskid}}"  data-transid="{{transid}}" data-keyvalue="{{keyvalue}}">\n                <div class="me-5">\n                    <a href="javascript:void(0)" onclick="axTasksObj.openProcess(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\',\'{{taskid}}\')" class="HomeP-ActiveList-Title">{{displaytitle}}</a>\n                    <span class="HomeP-ActiveList-Desc">{{displaycontent}}</span>\n                </div>\n            </div>\n        </div>',this.noRecordsRowHtml='\n        <table class="table align-middle  fs-6 gy-5 mb-0 dataTable no-footer No-Task-Containter">\n            <tbody>\n                <tr class="d-flex ">                                           \n                    <td class="d-flex align-items-center flex-column No-Task ">\n\t\t\t\t\t\x3c!--<img src="../custompages/icons/notask.gif" >--\x3e\n\t\t\t\t\t<h2>Welcome to HCM.</h2>\n                    No active tasks available. Your tasks will be listed here.\n                    </td>\n                </tr>\n            </tbody>\n        </table>',this.processedRowHtml='\n        <table class="table align-middle  fs-6 gy-5 mb-0 dataTable no-footer task-listing-card">\n            <tbody>\n                <tr class="d-flex header">                                           \n                    <td class="d-flex align-items-center task-name">\n                        This task has been processed.\n                    </td>\n                </tr>\n            </tbody>\n        </table>',this.filters={},this.filters.processFilterCardHtml=' \n        <li class="nav-item" role="presentation" title="{{processname}}" data-process="{{processname}}" onclick="axTasksObj.filterTasks(\'process\',\'{{processname}}\',this)">\n            <a class="nav-link" data-bs-toggle="tab" href="#kt_tab_pane_1" aria-selected="true" role="tab"><img alt="{{processname}}" class=" w-30px" src="../custompages/icons/{{processname}}.png" onerror="this.onerror=null;this.src=\'../custompages/icons/default.png\';"></a>\n            <span class="AC-List-Counts">{{processcount}}</span>\n        </li>',this.filters.typeFilterCardHtml='\n        <div class="step sub-task-lists " onclick="axTasksObj.filterTasks(\'type\',\'{{processname}}~~{{type}}\',this)">\n            <div> <span\n                    class="material-icons material-icons-style material-icons-2">{{icon}}</span>\n            </div>\n            <div class="title">{{type}} <span class="task-count-sub">{{count}}</span></div>\n        </div>',this.filters.viewAllBtnHtml="",this.taskBtnsHtml={},this.taskBtnsHtml.make='\n            <a href="javascript:void(0)" title="Make" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  btn-sm  me-2" onclick="axTasksObj.openProcess(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\',\'{{taskid}}\')""><span class="material-icons material-icons-style material-icons-2" style="color: orange;">assignment</span></a>',this.taskBtnsHtml.view='\n            <a href="javascript:void(0)" title="View form" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  btn-sm  me-2 " onclick="axTasksObj.openTstruct(\'{{transid}}\',\'{{recordid}}\')""><span class="material-icons material-icons-style material-icons-2" style="color: darkmagenta;">visibility</span>\n          \n            \n            </a>',this.taskBtnsHtml.history='\n            <a href="javascript:void(0)" title="View History" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  btn-sm  me-2 " onclick="axTasksObj.openHistory(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\')""><span class="material-icons material-icons-style material-icons-2" style="color: blue;">history</span>\n         \n            </a>',this.taskBtnsHtml.approve='\n            <div class="task-actions-sets d-flex" data-taskname="{{taskname}}" data-processname="{{processname}}"><a href="javascript:void(0)" title="Approve" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  btn-sm  me-2 "\n                onclick="axTasksObj.doApprove(\'{{taskid}}\', this);" data-confirmMessage=\'{{cmsg_appcheck}}\'><span class="material-icons material-icons-style material-icons-2"\n                    style="color: #47BE7D;">check_circle</span>\n            </a>\n\n            <a href="javascript:void(0)" title="Approve Reasons/Comments" data-popover="APPROVE{{taskid}}"\n                class="btn btn-white btn-color-gray-700d-inline-flex align-items-center  btn-sm  more-comments taskActionBtn"\n                data-kt-menu-trigger="click" data-kt-menu-placement="bottom" data-kt-menu-flip="top" data-confirmMessage=\'{{cmsg_appcheck}}\' data-action=\'APPROVE\' data-taskid="{{taskid}}">\n                <span class="comments-icons material-icons material-icons-style material-icons-2">more_vert</span>\n            </a>\n            <div  class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Approve">\n                                <label class="form-label col-form-label">Approve reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Approve" data-taskid="APPROVE{{taskid}}" class="form-select "\n                                        data-tasktype="Approve">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Approve">\n                                <label class="form-label col-form-label  {{isApprovalComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Approve" data-taskid="APPROVE{{taskid}}" class="form-control"\n                                        data-tasktype="Approve" {{isApprovalComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Approval-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm" data-confirmMessage=\'{{cmsg_appcheck}}\' onclick="return axTasksObj.doApprove(\'{{taskid}}\', this);">Approve</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>',this.taskBtnsHtml.reject='\n            <div class="task-actions-sets d-flex" data-taskname="{{taskname}}" data-processname="{{processname}}"><a href="javascript:void(0)" title="Reject" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  me-2  btn-sm"\n                onclick="axTasksObj.doReject(\'{{taskid}}\', this)" data-confirmMessage=\'{{cmsg_reject}}\'><span class="material-icons material-icons-style material-icons-2"\n                    style="color: red;">cancel</span></a>\n            <a href="javascript:void(0)" title="Reject Reasons/Comments" data-popover="REJECT{{taskid}}"\n                class="btn btn-white btn-color-gray-700d-inline-flex align-items-center  btn-sm  more-comments taskActionBtn"\n                data-kt-menu-trigger="click" data-kt-menu-placement="bottom" data-kt-menu-flip="top" data-confirmMessage=\'{{cmsg_reject}}\' data-action=\'REJECT\' data-taskid="{{taskid}}">\n                <span class="comments-icons material-icons material-icons-style material-icons-2">more_vert</span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Reject">\n                                <label class="form-label col-form-label">Reject reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Reject" data-taskid="REJECT{{taskid}}" class="form-select "\n                                        data-tasktype="Reject">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Reject">\n                                <label class="form-label col-form-label  {{isRejectComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Reject" data-taskid="REJECT{{taskid}}" class="form-control"\n                                        data-tasktype="Reject" {{isRejectComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Approval-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm" onclick="return axTasksObj.doReject(\'{{taskid}}\', this)" data-confirmMessage=\'{{cmsg_reject}}\'>Reject</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>',this.taskBtnsHtml["return"]='\n            <div class="task-actions-sets d-flex" id="ACT-Return" data-taskname="{{taskname}}" data-processname="{{processname}}">\n            <a href="javascript:void(0)" title="Return"\n                class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  me-2  btn-sm"\n                onclick="axTasksObj.doReturn(\'{{taskid}}\', this, \'{{tasktype}}\')" data-confirmMessage=\'{{cmsg_return}}\'><span class="material-icons material-icons-style material-icons-2"\n                    style="color: blueviolet;">reply</span></a>\n            <a href="javascript:void(0)" title="Return Reasons/Comments" data-popover="RETURN{{taskid}}"\n                class="btn btn-white btn-color-gray-700d-inline-flex align-items-center  btn-sm  more-comments taskActionBtn"\n                data-kt-menu-trigger="click" data-kt-menu-placement="bottom" data-kt-menu-flip="top"  data-confirmMessage=\'{{cmsg_return}}\' data-action=\'RETURN\' data-taskid="{{taskid}}">\n                <span class="comments-icons material-icons material-icons-style material-icons-2">more_vert</span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label">Return To</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Return" data-taskid="returnto_{{taskid}}" class="form-select " data-tasktype="Return">\n                                        <option value="0">Initiator</option>\n                                        <option value="1">Previous Level</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label">Return reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Return" data-taskid="RETURN{{taskid}}" class="form-select "\n                                        data-tasktype="Return">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label  {{isReturnComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Return" data-taskid="RETURN{{taskid}}" class="form-control"\n                                        data-tasktype="Return" {{isReturnComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Approval-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm" onclick="return axTasksObj.doReturn(\'{{taskid}}\', this, \'{{tasktype}}\')" data-confirmMessage=\'{{cmsg_return}}\'>Return</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>',this.taskBtnsHtml.check='\n             <a href="javascript:void(0)" title="Check" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  me-2  btn-sm" onclick="axTasksObj.doCheck(\'{{taskid}}\')"><span class="material-icons material-icons-style material-icons-2" style="color: #47BE7D;">done_all</span>\n             </a>            \n        ',this.taskBtnsHtml.send='\n            <div class="task-actions-sets d-flex" id="ACT_Send">\n            <a href="javascript:void(0)" title="Send"\n                class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center  me-2  btn-sm"\n                onclick="axTasksObj.doSend(\'{{taskid}}\', \'{{tasktype}}\', this)"><span class="material-icons material-icons-style material-icons-2"\n                    style="color: darkmagenta;">send</span></a>\n            <a href="javascript:void(0)" title="Send Reasons/Comments" data-popover="SEND{{taskid}}"\n                class="btn btn-white btn-color-gray-700d-inline-flex align-items-center  btn-sm  more-comments sendto" data-taskid="{{taskid}}" data-tasktype="{{tasktype}}" data-keyvalue="{{keyvalue}}" data-taskname="{{taskname}}"\n                data-kt-menu-trigger="click" data-kt-menu-placement="bottom" data-kt-menu-flip="top">\n                <span class="comments-icons material-icons material-icons-style material-icons-2">more_vert</span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true" data-popoverid="SEND{{taskid}}">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Send">\n                                <label class="form-label col-form-label">Send To</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Send" data-taskid="sendto_{{taskid}}" class="form-select " data-tasktype="Send">\n                                        <option style="display:none">Select user...</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Send">\n                                <label class="form-label col-form-label  {{isSendComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Send" data-taskid="SEND{{taskid}}" class="form-control"\n                                        data-tasktype="Send" ></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Approval-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm" onclick="return axTasksObj.doSend(\'{{taskid}}\', \'{{tasktype}}\', this)">Send</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>',this.taskBtnsHtml.more='\n            <button href="javascript:void(0)" class="btn btn-icon btn-active-light-primary w-30px h-30px"\n                data-kt-menu-trigger="{default:\'click\', lg: \'hover\'}" data-kt-menu-attach="parent"\n                data-kt-menu-placement="bottom-end">\n                <span class="material-icons material-icons-style material-icons-1">\n                    more_horiz\n                </span>\n            </button>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-title-gray-700 menu-icon-muted menu-active-bg menu-state-primary fw-bold py-4 fs-6 w-150px Active_list_popover"\n                data-kt-menu="true" style="">\n\n                <div class="menu-item px-3">\n                    <a href="javascript:void(0)" class="menu-link d-flex px-5 ">\n                        <span class="symbol symbol-20px me-4">\n                            <span class="material-icons material-icons-style material-icons-1">\n                                ios_share\n                            </span>\n                        </span>Open</a>\n                </div>\n\n                <div class="menu-item px-3">\n                    <a href="javascript:void(0)" class="menu-link d-flex px-5">\n                        <span class="symbol symbol-20px me-4">\n                            <span class="material-icons material-icons-style material-icons-1">\n                                check_circle\n                            </span>\n                        </span>Approve</a>\n                </div>\n\n                <div class="menu-item px-3">\n                    <a href="javascript:void(0)" class="menu-link d-flex px-5">\n                        <span class="symbol symbol-20px me-4">\n                            <span class="material-icons material-icons-style material-icons-1">\n                                cancel\n                            </span>\n                        </span>Reject </a>\n                </div>\n\n                <div class="menu-item px-3">\n                    <a href="javascript:void(0)" class="menu-link d-flex px-5">\n                        <span class="symbol symbol-20px me-4">\n                            <span class="material-icons material-icons-style material-icons-1">\n                                reply\n                            </span>\n                        </span>Return </a>\n                </div>\n            </div>',this.mobileTaskButtons={},this.mobileTaskButtons.approve='\n        <li>\n            <a href="javascript:void(0)" href="javascript:void(0)" title="Approve" onclick="axTasksObj.doApprove(\'{{taskid}}\', this);" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2" style="color: #47BE7D;">\n                    <span class="material-symbols-outlined">\n                        check_circle\n                    </span>\n                </span><span class="TA-name">Approve</span>\n            </a>\n            <a href="javascript:void(0)" title="Approve Reasons/Comments" data-popover="APPROVE{{taskid}}" data-kt-menu-trigger="click"\n                data-kt-menu-placement="bottom" data-kt-menu-flip="top" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined">more_vert</span>\n                </span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Approve">\n                                <label class="form-label col-form-label">Approve reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Approve" data-taskid="APPROVE{{taskid}}" class="form-select mobile"\n                                        data-tasktype="Approve">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Approve">\n                                <label class="form-label col-form-label  {{isApprovalComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Approve" data-taskid="APPROVE{{taskid}}" class="form-control mobile"\n                                        data-tasktype="Approve" {{isApprovalComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Approval-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm mobile"\n                               data-confirmMessage=\'{{cmsg_appcheck}}\' onclick="return axTasksObj.doApprove(\'{{taskid}}\', this);">Approve</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </li>',this.mobileTaskButtons.reject='\n        <li>\n            <a href="javascript:void(0)" href="javascript:void(0)" title="Reject" onclick="axTasksObj.doReject(\'{{taskid}}\', this);" class="mobile" data-confirmMessage=\'{{cmsg_reject}}\'>\n                <span class="material-icons material-icons-style material-icons-2" style="color: red;">\n                    <span class="material-symbols-outlined">\n                        cancel\n                    </span>\n                </span><span class="TA-name">Reject</span>\n            </a>\n            <a href="javascript:void(0)" title="Reject Reasons/Comments" data-popover="REJECT{{taskid}}" data-kt-menu-trigger="click"\n                data-kt-menu-placement="bottom" data-kt-menu-flip="top" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined">more_vert</span>\n                </span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Reject">\n                                <label class="form-label col-form-label">Reject reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Reject" data-taskid="REJECT{{taskid}}" class="form-select mobile"\n                                        data-tasktype="Reject">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Reject">\n                                <label class="form-label col-form-label  {{isRejectComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Reject" data-taskid="REJECT{{taskid}}" class="form-control mobile"\n                                        data-tasktype="Reject" {{isRejectComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Reject-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm mobile"\n                                onclick="return axTasksObj.doReject(\'{{taskid}}\', this); data-confirmMessage=\'{{rejectconfirmmsg}}\'">Reject</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </li>',this.mobileTaskButtons["return"]='\n        <li>\n            <a href="javascript:void(0)" href="javascript:void(0)" title="Return" onclick="axTasksObj.doReturn(\'{{taskid}}\', this, \'{{tasktype}}\');" data-confirmMessage=\'cmsg_return\' class="mobile">\n                <span class="material-icons material-icons-style material-icons-2" style="color: blueviolet;">\n                    <span class="material-symbols-outlined">\n                        reply\n                    </span>\n                </span><span class="TA-name">Return</span>\n            </a>\n            <a href="javascript:void(0)" title="Return Reasons/Comments" data-popover="RETURN{{taskid}}" data-kt-menu-trigger="click"\n                data-kt-menu-placement="bottom" data-kt-menu-flip="top" class="mobile">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined">more_vert</span>\n                </span>\n            </a>\n            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-400px Active_list_popover"\n                data-kt-menu="true">\n                <div class="card">\n                    <div class="card-body py-5z">\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label">Return To</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Return" data-taskid="returnto_{{taskid}}" class="form-select mobile" data-tasktype="Return">\n                                        <option value="0">Initiator</option>\n                                        <option value="1">Previous Level</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label">Return reasons</label>\n                                <div class="input-group">\n                                    <select data-tasktype="Return" data-taskid="RETURN{{taskid}}" class="form-select mobile"\n                                        data-tasktype="Return">\n                                        <option value="">NA</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row my-3">\n                            <div class="approval-controls" data-tasktype="Return">\n                                <label class="form-label col-form-label  {{isReturnComments}}">Comments</label>\n                                <div class="input-group">\n                                    <textarea data-tasktype="Return" data-taskid="RETURN{{taskid}}" class="form-control mobile"\n                                        data-tasktype="Return" {{isReturnComments}}></textarea>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="text-center Return-OK">\n                            <button class="btn btn-sm btn-primary shadow-sm mobile" data-confirmMessage=\'{{cmsg_return}}\'\n                                onclick="return axTasksObj.doReturn(\'{{taskid}}\', this, \'{{tasktype}}\');">Return</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </li>',this.mobileTaskButtons.make='\n        <li>\n            <a href="javascript:void(0)" title="Make" onclick="axTasksObj.openProcess(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\',\'{{taskid}}\')">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined">assignment</span>\n                </span><span class="TA-name">Make </span>\n            </a>\n\n        </li>',this.mobileTaskButtons.view='\n        <li>\n            <a href="javascript:void(0)" title="View Form" onclick="axTasksObj.openTstruct(\'{{transid}}\',\'{{recordid}}\')">\n\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined" style="color: darkmagenta;">visibility</span>\n                </span><span class="TA-name">View Form </span>\n            </a>\n\n        </li>',this.mobileTaskButtons.history='\n        <li>\n            <a href="javascript:void(0)" title="View History" onclick="axTasksObj.openHistory(\'{{processname}}\',\'{{keyfield}}\',\'{{keyvalue}}\')"  style="color: blue;">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined" style="color: blue;">history</span>\n                </span><span class="TA-name">View History </span>\n            </a>\n\n        </li>',this.mobileTaskButtons.check='\n        <li>\n            <a href="javascript:void(0)" title="Check" onclick="axTasksObj.doCheck(\'{{taskid}}\')"  style="color: blue;">\n                <span class="material-icons material-icons-style material-icons-2">\n                    <span class="material-symbols-outlined" style="color: #47BE7D;">done_all</span>\n                </span><span class="TA-name">Check </span>\n            </a>\n\n        </li>',this.dataSources={},this.processName="",this.task={},this.task.keyField="",this.task.keyValue="",this.task.taskName="",this.task.taskType="",this.task.taskId=""}return _createClass(t,[{key:"init",value:function(){this.getUrlParams();var t,e,a,s=this.task;this.isNullOrEmpty(s.taskId)||this.isUndefined(s.taskId)?this.fetchActiveTasks("Tasks"):(document.querySelector("#ActiveTask_Left").classList.remove("d-flex"),document.querySelector("#ActiveTask_Left").style.display="none",this.fetchProcessTask("Tasks"),this.isUndefined(null===(t=this.dataSources)||void 0===t?void 0:null===(e=t.Tasks)||void 0===e?void 0:null===(a=e[0])||void 0===a?void 0:a.displaytitle)||(document.querySelector("#task-page-title").innerHTML=this.dataSources.Tasks[0].displaytitle));this.showTasks(),ShowDimmer(!1),KTMenu.init(),this.bindEvents()}},{key:"bulkInit",value:function(){this.getUrlParams();var t,e,a,s=this.task;this.isNullOrEmpty(s.taskName)||this.isUndefined(s.taskName)?this.fetchBulkTasks("BulkTasks"):(document.querySelector("#ActiveTask_Left").classList.remove("d-flex"),document.querySelector("#ActiveTask_Left").style.display="none",this.fetchBulkTasks("BulkTasks"),this.isUndefined(null===(t=this.dataSources)||void 0===t?void 0:null===(e=t.Tasks)||void 0===e?void 0:null===(a=e[0])||void 0===a?void 0:a.displaytitle)||(document.querySelector("#task-page-title").innerHTML=this.dataSources.Tasks[0].displaytitle));this.showBulkTasks(),ShowDimmer(!1),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this;"undefined"!=typeof parent.axProcessObj&&(parent.ShowDimmer(!1),document.querySelectorAll(".task-title > span").forEach(function(t){t.onclick="javascript:void(0)"})),document.querySelectorAll(".sendto").forEach(function(e){KTMenu.getInstance(e).on("kt.menu.dropdown.show",function(e){var a=e.dataset,s=document.querySelector('[data-popoverid="SEND'.concat(a.taskid,'"] select'));null!=s&&0==(null==s?void 0:s.classList.contains("data-fetched"))&&t.getSendToUsers(a.taskid,a.tasktype,a.keyvalue,a.taskname,s)})}),document.querySelectorAll(".taskActionBtn").forEach(function(e){KTMenu.getInstance(e).on("kt.menu.dropdown.show",function(e){setTimeout(function(){isActiveTskPopoverVisible=!0,document.querySelector("#Homepage_ActiveList .card-body").style.overflow="hidden"},1);var a=e.dataset;t.checkPopoverConfirmation(a.action,a.taskid,e,a.confirmmessage)}),KTMenu.getInstance(e).on("kt.menu.dropdown.hide",function(t){isActiveTskPopoverVisible=!1,document.querySelector("#Homepage_ActiveList .card-body").style.overflow="auto"})});var e=document.getElementById("select-all-checkbox");null==e||e.addEventListener("change",function(){document.querySelectorAll(".task-list-checkbox").forEach(function(t){t.checked=e.checked})})}},{key:"fetchActiveTasks",value:function(t){var e=this,a="../aspx/AxPEG.aspx/GetActiveTasks";e.isAxpertFlutter&&(a="../../ARM_APIs/api/v1/ARMGetActiveTasks"),this.callAPI(a,{},!1,function(a){if(a.success){var s=JSON.parse(a.response),n=e.dataConvert(s,"ARM");e.dataSources[t]=n}})}},{key:"fetchBulkTasks",value:function(t){var e=this,a="../aspx/AxPEG.aspx/AxGetBulkActiveTasks",s={processName:e.processName,taskType:"Approve"};e.isAxpertFlutter&&(a="../../ARM_APIs/api/v1/ARMGetActiveTasks"),this.callAPI(a,s,!1,function(a){if(a.success){var s=JSON.parse(a.response),n=e.dataConvert(s,"ARM");e.dataSources[t]=n}})}},{key:"getSendToUsers",value:function(t,e,a,s,n){var i=this,o="../aspx/AxPEG.aspx/AxGetSendToUsers";i.isAxpertFlutter&&(o="../../ARM_APIs/api/v1/ARMGetSendToUsers");var l={};l.taskId=t,l.taskType=e,l.keyValue=a,l.taskName=s,this.callAPI(o,l,!1,function(t){if(t.success){var e=JSON.parse(t.response);i.dataConvert(e,"ARM").forEach(function(t){var e=document.createElement("option");e.value=t.pusername,e.text=t.pusername,n.add(e)}),n.classList.add("data-fetched")}})}},{key:"connectToAxpert",value:function(){var t=this;this.callAPI("../../AxAuth/api/v1/ARMConnectToAxpert",{},!1,function(e){if(e.success){var a,s=JSON.parse(e.response),n=t.dataConvert(s,"ARM");1==(null==n?void 0:null===(a=n.result)||void 0===a?void 0:a.success)?sessionStorage.connectedToAxpert=!0:showAlertDialog("Error","Error in connecting to Axpert.")}})}},{key:"fetchProcessTask",value:function(t){var e=this,a="../aspx/AxPEG.aspx/AxGetProcessTask";e.isAxpertFlutter&&(a="../../ARM_APIs/api/v1/ARMGetProcessTask");var s={taskId:this.task.taskId};this.callAPI(a,s,!1,function(a){if(a.success){var s=JSON.parse(a.response),n=e.dataConvert(s,"ARM");e.dataSources[t]=n}})}},{key:"checkComments",value:function(t,e,a){var s,n,i=null!=a&&null!==(s=a.classList)&&void 0!==s&&s.contains("mobile")?".mobile":":not(.mobile)",o=t.toLowerCase();return o="approve"==o?"approval":o,"T"!=this.dataSources.TaskReasons[e]["".concat(o,"comments")]||""!=document.querySelector('textarea[data-taskid="'.concat(t).concat(e,'"]').concat(i)).value||(null!==(n=document.querySelector('a[data-popover="'.concat(t).concat(e,'"]').concat(i)))&&void 0!==n&&n.classList.contains("show")||setTimeout(function(){document.querySelector('a[data-popover="'.concat(t).concat(e,'"]').concat(i)).click()},100),document.querySelector('textarea[data-taskid="'.concat(t).concat(e,'"]').concat(i)).focus(),showAlertDialog("Error","Comments are mandatory."),!1)}},{key:"doApprove",value:function(t,e){return this.doTaskAction("APPROVE",t,"APPROVE",e),!0}},{key:"doReject",value:function(t,e){this.doTaskAction("REJECT",t,"APPROVE",e)}},{key:"doReturn",value:function(t,e,a){this.doTaskAction("RETURN",t,a.toUpperCase(),e)}},{key:"doCheck",value:function(t){this.doTaskAction("CHECK",t,"CHECK")}},{key:"doSend",value:function(t,e,a){this.doTaskAction("SEND",t,e.toUpperCase(),a)}},{key:"doTaskAction",value:function(t,e,a,s){var n,i=this,o=null!=s&&null!==(n=s.classList)&&void 0!==n&&n.contains("mobile")?".mobile":":not(.mobile)",l=this,c="../aspx/AxPEG.aspx/AxDoTaskAction";l.isAxpertFlutter&&(c="../../ARM_APIs/api/v1/ARMDoTaskAction");var r,d,m="",u="";"APPROVE"==a&&(m=(null===(r=document.querySelector('select[data-taskid="'.concat(t).concat(e,'"]').concat(o)))||void 0===r?void 0:r.value)||"",u=(null===(d=document.querySelector('textarea[data-taskid="'.concat(t).concat(e,'"]').concat(o)))||void 0===d?void 0:d.value)||"");var p,v="";if("RETURN"==t)v=(null===(p=document.querySelector('select[data-taskid="returnto_'.concat(e,'"]').concat(o)))||void 0===p?void 0:p.value)||"";else if("SEND"==t){var k;v=(null===(k=document.querySelector('select[data-taskid="sendto_'.concat(e,'"]').concat(o)))||void 0===k?void 0:k.value)||""}if("RETURN"!=t&&"SEND"!=t||!this.isUndefined(v)&&!this.isNullOrEmpty(v)){if(!(doTask=this.checkConfirmation(this,t,e,a,s)))return!1;if("REJECT"===t||"RETURN"===t||"APPROVE"===t)if(!this.checkComments(t,e,s))return!1;ShowDimmer(!0);try{doTask=AxBeforeTaskAction(this,t,e,a,s)}catch(b){doTask=!0}if(doTask){var f={action:t,taskId:e,taskType:a,statusReason:m,statusText:u,toUser:v};this.callAPI(c,f,!0,function(t){if(ShowDimmer(!1),t.success){var e=JSON.parse(t.response);l.isAxpertFlutter||(e=JSON.parse(e.d)),e.result.success?(l.showSuccess(e.result.message),l.isUndefined(parent.axProcessObj)?setTimeout(function(){l.init()},1e3):parent.window.location.reload()):l.catchError(e.result.message)}try{AxAfterTaskAction(i,t)}catch(b){}taskActionCheck=!0})}}else showAlertDialog("Error","Send To user is mandatory.")}},{key:"doBulkAction",value:function(t,e){var a=this;ShowDimmer(!0);var s=document.querySelector("#".concat(t,"Comments")).value,n=document.querySelectorAll(".task-list-checkbox:checked");if(0==n.length)return showAlertDialog("Error","Select atleast one task for approval."),!1;var i=[];n.forEach(function(t){i.push(t.dataset.taskid)});var o={action:t,taskId:i=i.join(","),taskType:e,statusText:s,processName:this.processName};this.callAPI("../aspx/AxPEG.aspx/AxDoBulkAction",o,!0,function(t){if(ShowDimmer(!1),t.success){var e=JSON.parse(t.response);a.isAxpertFlutter||(e=JSON.parse(e.d)),e.result.success?(a.showSuccess(e.result.message),a.isUndefined(parent.axProcessObj)?setTimeout(function(){axProcessObj.refreshPage()},1e3):parent.window.location.reload()):a.catchError(e.result.message)}})}},{key:"callAPI",value:function(t,e,a,s){var n=this,i=new XMLHttpRequest;i.open("POST",t,a),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.isAxpertFlutter&&(i.setRequestHeader("Authorization","Bearer ".concat(armToken)),e.ARMSessionId=armSessionId),i.onreadystatechange=function(){if(4==this.readyState)if(200==this.status)s({success:!0,response:this.responseText});else{try{var t,e,a=null===(t=JSON.parse(this.responseText))||void 0===t?void 0:null===(e=t.result)||void 0===e?void 0:e.message;n.catchError(a)}catch(i){n.catchError(this.responseText)}s({success:!1,response:this.responseText})}},i.send(JSON.stringify(e))}},{key:"catchError",value:function(t){showAlertDialog("error",t)}},{key:"showSuccess",value:function(t){showAlertDialog("success",t)}},{key:"isEmpty",value:function(t){return""==t}},{key:"isNull",value:function(t){return null==t}},{key:"isNullOrEmpty",value:function(t){return null==t||""==t}},{key:"isUndefined",value:function(t){return void 0===t}},{key:"dataConvert",value:function(t,e){if("AXPERT"==e){try{if("undefined"!=typeof(t=JSON.parse(t.d)).result[0].result.row)return t.result[0].result.row}catch(a){this.catchError(a.message)}try{if("undefined"!=typeof t.result[0].result)return t.result[0].result}catch(a){this.catchError(a.message)}}else if("ARM"==e)try{if(this.isAxpertFlutter||(t=JSON.parse(t.d)),t.result.success){if(!this.isUndefined(t.result.data))try{return JSON.parse(t.result.data)}catch(s){return t.result.data}}else this.isUndefined(t.result.message)||this.catchError(t.result.message)}catch(a){this.catchError(a.message)}return t}},{key:"generateFldId",value:function(){return"fid".concat(Date.now()).concat(Math.floor(9e4*Math.random())+1e4)}},{key:"showTasks",value:function(){var t,e=this;this.dataSources.hasOwnProperty("TaskReasons")||(this.dataSources.TaskReasons={}),document.querySelector("#ActiveList_Container").innerHTML="",(null===(t=this.dataSources.Tasks)||void 0===t?void 0:t.length)==undefined||0==this.dataSources.Tasks.length?this.isUndefined(parent.axProcessObj)?(document.querySelector("#ActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(this.noRecordsRowHtml," ")),document.querySelector(".activelist-tabs").innerHTML=""):(document.querySelector("#ActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(this.processedRowHtml," ")),document.querySelector(".activelist-tabs").innerHTML=""):(this.dataSources.Tasks.forEach(function(t,a){var s;if(!e.isNullOrEmpty(t.taskstatus)){var n="<span>This task has been <b>{{taskstatus}}</b> by <b>{{username}}</b> on <b>{{eventdatetime}}.</b></span>";return e.isNullOrEmpty(t.statusreason)||(n+="<span>Reason: <b>{{statusreason}}</b></span>"),e.isNullOrEmpty(t.statustext)||(n+="<span>Comments: <b>{{statustext}}</b></span>"),n=Handlebars.compile(n)(t),void document.querySelector("#ActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(n," "))}if(!e.isNullOrEmpty(t.ispending)){var i="<span>This task has been pending with user(s):  <b>{{touser}}</b> from <b>{{eventdatetime}}.</b></span>";return e.isNullOrEmpty(t.statusreason)||(i+="<span>Reason: <b>{{statusreason}}</b></span>"),e.isNullOrEmpty(t.statustext)||(i+="<span>Comments: <b>{{statustext}}</b></span>"),i=Handlebars.compile(i)(t),void document.querySelector("#ActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(i," "))}var o=["2","3","4"];switch(t.tasktype.toUpperCase()){case"MAKE":t.task_buttons_html=e.taskBtnsHtml.make+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.make+e.mobileTaskButtons.history;break;case"CHECK":var l;if("F"==(null==t?void 0:t.initiator_approval)&&t.touser==t.initiator||"T"!=t.showbuttons)t.task_buttons_html=e.taskBtnsHtml.view+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.view+e.mobileTaskButtons.history;else t.task_buttons_html=e.taskBtnsHtml.check+e.taskBtnsHtml["return"]+(o.indexOf(null==t?void 0:null===(l=t.allowsendflg)||void 0===l?void 0:l.toString())>-1?e.taskBtnsHtml.send:"")+e.taskBtnsHtml.view+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.check+e.mobileTaskButtons["return"]+e.mobileTaskButtons.view+e.mobileTaskButtons.history;break;case"APPROVE":var c;if("F"==(null==t?void 0:t.initiator_approval)&&t.touser==t.initiator||"T"!=t.showbuttons)t.task_buttons_html=e.taskBtnsHtml.view+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.view+e.mobileTaskButtons.history;else t.task_buttons_html=e.taskBtnsHtml.approve+e.taskBtnsHtml.reject+("T"==(null==t?void 0:t.returnable)?e.taskBtnsHtml["return"]:"")+(o.indexOf(null==t?void 0:null===(c=t.allowsendflg)||void 0===c?void 0:c.toString())>-1?e.taskBtnsHtml.send:"")+e.taskBtnsHtml.view+e.taskBtnsHtml.history,t.mobile_task_buttons_html=e.mobileTaskButtons.approve+e.mobileTaskButtons.reject+("T"==(null==t?void 0:t.returnable)?e.mobileTaskButtons["return"]:"")+e.mobileTaskButtons.view+e.mobileTaskButtons.history}e.dataSources.TaskReasons[t.taskid]={approvalcomments:t.approvalcomments,rejectcomments:t.rejectcomments,returncomments:t.returncomments};var r="";if("APPROVE"==t.tasktype.toUpperCase()?(t.isApprovalComments="T"==t.approvalcomments?"required":"",t.isRejectComments="T"==t.rejectcomments?"required":"",t.isReturnComments="T"==t.returncomments?"required":""):"CHECK"==t.tasktype.toUpperCase()&&(t.isReturnComments="T"==t.returncomments?"required":""),"PEG"==(null==t?void 0:t.rectype)||e.isUndefined(null==t?void 0:t.rectype)||e.isNullOrEmpty(null==t?void 0:t.rectype)?(t.displaymcontent=encodeURI(t.displaymcontent),r=Handlebars.compile(e.processRowHtml.replace("{{task_buttons_html}}",t.task_buttons_html).replace("{{mobile_task_buttons_html}}",t.mobile_task_buttons_html))(t)):"MSG"==(null==t?void 0:t.rectype)&&"REMINDER"==(null==t?void 0:null===(s=t.msgtype)||void 0===s?void 0:s.toUpperCase())&&(r=Handlebars.compile(e.reminderRowHtml)(t)),e.isAxpertFlutter&&(r=r.replaceAll("../custompages/icons","../../icons")),r=e.decodeHTMLEntities(r),document.querySelector("#ActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(r," ")),"APPROVE"==t.tasktype.toUpperCase()){if(e.isNullOrEmpty(t.approvereasons))document.querySelectorAll('select[data-taskid="APPROVE'.concat(t.taskid,'"]')).forEach(function(t){t.closest(".row").classList.add("d-none")});else{var d=t.approvereasons.split(",");document.querySelectorAll('select[data-taskid="APPROVE'.concat(t.taskid,'"]')).forEach(function(t){for(;t.options.length>0;)t.remove(0);for(var e=0;e<d.length;e++){var a=document.createElement("option");a.value=d[e],a.innerHTML=d[e],t.appendChild(a)}})}if(e.isNullOrEmpty(t.defapptext)||document.querySelectorAll('textarea[data-taskid="APPROVE'.concat(t.taskid,'"]')).forEach(function(e){e.value=t.defapptext}),e.isNullOrEmpty(t.rejectreasons))document.querySelectorAll('select[data-taskid="REJECT'.concat(t.taskid,'"]')).forEach(function(t){t.closest(".row").classList.add("d-none")});else{var m=t.rejectreasons.split(",");document.querySelectorAll('select[data-taskid="REJECT'.concat(t.taskid,'"]')).forEach(function(t){for(;t.options.length>0;)t.remove(0);for(var e=0;e<m.length;e++){var a=document.createElement("option");a.value=m[e],a.innerHTML=m[e],t.appendChild(a)}})}e.isNullOrEmpty(t.defregtext)||document.querySelectorAll('textarea[data-taskid="REJECT'.concat(t.taskid,'"]')).forEach(function(e){e.value=t.defregtext})}if("APPROVE"==t.tasktype.toUpperCase()||"CHECK"==t.tasktype.toUpperCase()){if(e.isNullOrEmpty(t.returnreasons))document.querySelectorAll('select[data-taskid="RETURN'.concat(t.taskid,'"]')).forEach(function(t){t.closest(".row").classList.add("d-none")});else{var u=t.returnreasons.split(",");document.querySelectorAll('select[data-taskid="RETURN'.concat(t.taskid,'"]')).forEach(function(t){for(;t.options.length>0;)t.remove(0);for(var e=0;e<u.length;e++){var a=document.createElement("option");a.value=u[e],a.innerHTML=u[e],t.appendChild(a)}})}e.isNullOrEmpty(t.defrettext)||document.querySelectorAll('textarea[data-taskid="RETURN'.concat(t.taskid,'"]')).forEach(function(e){e.value=t.defrettext})}}),this.isUndefined(parent.axProcessObj)||document.querySelectorAll(".List_view").forEach(function(t){t.click()}),document.querySelectorAll(".HP-ActiveList-Items").forEach(function(t){t.addEventListener("click",function(){document.querySelectorAll(".HP-ActiveList-Items.active").forEach(function(t){t.classList.remove("active")}),this.classList.add("active"),axTasksObj.toggleTask(this.dataset.taskid)}),t.addEventListener("mouseover",function(){isActiveTskPopoverVisible||(document.querySelectorAll(".HP-ActiveList-Items.focused").forEach(function(t){t.classList.remove("focused")}),t.classList.add("focused"),document.querySelectorAll(".HP-ActiveList-Items:not(.focused)").forEach(function(t){t.querySelectorAll(".show").forEach(function(t){t.classList.remove("show")})}))})}),this.constructFilters())}},{key:"decodeHTMLEntities",value:function(t){for(var e=[["&amp;","&"],["&apos;","'"],["&#x27;","'"],["&#x2F;","/"],["&#39;","'"],["&#47;","/"],["&lt;","<"],["&gt;",">"],["&nbsp;"," "],["&quot;",'"']],a=0,s=e.length;a<s;++a)t=t.replace(new RegExp(e[a][0],"g"),e[a][1]);return t}},{key:"showBulkTasks",value:function(){var t,e=this;document.querySelector("#BulkActiveList_Container").innerHTML="",(null===(t=this.dataSources.BulkTasks)||void 0===t?void 0:t.length)==undefined||0==this.dataSources.BulkTasks.length?this.isUndefined(parent.axProcessObj)?document.querySelector("#BulkActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(this.noRecordsRowHtml," ")):document.querySelector("#BulkActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(this.processedRowHtml," ")):this.dataSources.BulkTasks.forEach(function(t,a){var s=Handlebars.compile(e.bulkTaskRowHtml)(t);document.querySelector("#BulkActiveList_Container").insertAdjacentHTML("beforeend"," ".concat(s," "))})}},{key:"constructFilters",value:function(){if(this.dataSources.Tasks.length>0){var t=this.dataSources.Tasks.reduce(function(t,e){var a=e.processname;return t.hasOwnProperty(a)||(t[a]=0),t[a]++,t},{});document.querySelector(".activelist-tabs").innerHTML="";for(var e=1,a=0,s=Object.entries(t);a<s.length;a++){var n=_slicedToArray(s[a],2),i=n[0],o=n[1],l={processname:i,processid:this.sanitizeElementId(i),processcount:o,sno:e},c=Handlebars.compile(this.filters.processFilterCardHtml)(l);this.isAxpertFlutter&&(c=c.replaceAll("../custompages/icons","../../icons")),document.querySelector(".activelist-tabs").insertAdjacentHTML("beforeend"," ".concat(c," ")),6==e?e=1:e++}}document.querySelectorAll(".nav-link").forEach(function(t){t.addEventListener("click",function(){document.querySelectorAll(".nav-link.active").forEach(function(t){t.classList.remove("active")}),this.classList.add("active")})})}},{key:"sanitizeElementId",value:function(t){return t.replace(/[^a-zA-Z0-9-_]/g,"")}},{key:"getTaskTypeIcon",value:function(t){var e="assignment";switch(t.toUpperCase()){case"MAKE":e="assignment";break;case"CHECK":e="done_all";break;case"APPROVE":e="check_circle";break;case"REJECT":e="cancel";break;case"RETURN":e="reply";break;default:e="assignment"}return e}},{key:"openTstruct",value:function(t,e){var a="";if(this.isAxpertFlutter){if(this.checkAxpertConnection(),a="".concat(axpertUrl,"/aspx/AxMain.aspx?authKey=AXPERT-").concat(armSessionId,"&pname=t").concat(t),this.isNullOrEmpty(e)||"0"==e)return void showAlertDialog("error","Form details not available.");a+="&params=~act=load~recordid=".concat(e)}else{if(a="../aspx/tstruct.aspx?transid=".concat(t),this.isNullOrEmpty(e)||"0"==e)return void showAlertDialog("error","Form details not available.");a+="&act=load&recordid=".concat(e)}try{var s={id:"ldb".concat(t).concat(e),url:a};s.iFrameModalBody='<iframe id="'.concat(s.id,'" name="').concat(s.id,'" class="col-12 flex-column-fluid w-100 h-100" src="').concat(s.url,'" frameborder="0" allowtransparency="True"></iframe>'),this.openModal(s)}catch(n){showAlertDialog("error",n.message)}}},{key:"openHistory",value:function(t,e,a){var s="";this.isAxpertFlutter?(this.checkAxpertConnection(),s="".concat(axpertUrl,"/aspx/AxMain.aspx?authKey=AXPERT-").concat(armSessionId,"&pname=iad___pth&params=~pkeyvalue=").concat(a,"~pprocess=").concat(t)):s="../aspx/ivtoivload.aspx?ivname=ad___pth&pkeyvalue=".concat(a,"&pprocess=").concat(t);try{var n={id:"ldb".concat(a),url:s};n.iFrameModalBody='<iframe id="'.concat(n.id,'" name="').concat(n.id,'" class="col-12 flex-column-fluid w-100 h-100" src="').concat(n.url,'" frameborder="0" allowtransparency="True"></iframe>'),this.openModal(n)}catch(i){showAlertDialog("error",i.message)}}},{key:"openBulkApprove",value:function(){var t=this;try{var e={id:"ldbApprove",iFrameModalBody:'\n            <div class="card-body d-flex  row">\n                <div class="w-100" id="Bulk-SelectALL-wrap"> \n                    <div class="form-check" style="position:absolute">\n                      <input class="form-check-input" type="checkbox" id="select-all-checkbox">\n                      <label class="form-check-label" for="select-all-checkbox">\n                        Select All\n                      </label>\n                    </div>\n                    <h4 style="margin-left: 295px; font-weight:bold">Bulk Approvals</h4>\n                </div>\n                <div class="w-100" id="BulkActiveList_Container"> \n                </div>\n                <div class="w-100 mt-3">\n                    <div class="approval-controls" data-tasktype="Approve">\n                        <label class="form-label col-form-label mandatory">Bulk Approval Comments</label>\n                        <div class="input-group">\n                            <textarea data-tasktype="Approve" class="form-control"\n                                data-tasktype="Approve" id="BULKAPPROVEComments"></textarea>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <button  style="float:right " class="btn btn-primary btn-sm mt-2" type="button" onclick="axTasksObj.doBulkAction(\'BULKAPPROVE\',\'APPROVE\');">Bulk Approve</button>\n                </div>\n            </div>',size:"lg"};e.opening=t.bulkInit;try{var a=new BSModal("modal_".concat(e.id),"",e.iFrameModalBody,function(e){t.bulkInit(),ShowDimmer(!1)},function(t){});a.changeSize(e.size||"fullscreen"),a.hideHeader(),a.hideFooter(),a.showFloatingClose()}catch(s){showAlertDialog("error",s.message)}}catch(s){showAlertDialog("error",s.message)}}},{key:"openModal",value:function(t){try{var e=new BSModal("modal_".concat(t.id),"",t.iFrameModalBody,function(e){t.opening(),ShowDimmer(!1)},function(t){});e.changeSize(t.size||"fullscreen"),e.hideHeader(),e.hideFooter(),e.showFloatingClose()}catch(a){showAlertDialog("error",a.message)}}},{key:"getUrlParams",value:function(){var t=window.location.search,e=new URLSearchParams(t);this.task.keyField=e.get("keyfield"),this.task.keyValue=e.get("keyvalue"),this.processName=e.get("processname"),this.task.taskType=e.get("tasktype"),this.task.taskId=e.get("taskid"),this.task.taskName=e.get("taskname")}},{key:"openProcess",value:function(t,e,a,s){ShowDimmer(!0),this.isAxpertFlutter?(this.checkAxpertConnection(),window.location.href="".concat(axpertUrl,"/aspx/AxMain.aspx?authKey=AXPERT-").concat(armSessionId,"&pname=hAxProcessFlow&params=~processname=").concat(t,"~keyfield=").concat(e,"~keyvalue=").concat(a,"&taskid=").concat(s)):callParentNew("LoadIframe(htmlPages.aspx?loadcaption=AxProcessFlow&processname=".concat(t,"&keyfield=").concat(e,"&keyvalue=").concat(a,"&taskid=").concat(s,")"),"function")}},{key:"checkAxpertConnection",value:function(){"undefined"==typeof sessionStorage.connectedToAxpert&&this.connectToAxpert()}},{key:"filterTasks",value:function(t,e,a){var s;if("process"==t)document.querySelectorAll(".HP-ActiveList-Items").forEach(function(t){t.dataset.process==e?t.classList.remove("d-none"):(t.classList.remove("d-none"),t.classList.add("d-none"))}),document.querySelectorAll(".task-process-selection.active,.sub-task-lists.active,.task-process-selected.active").forEach(function(t){t.classList.remove("active")}),a.querySelectorAll(".task-process-selection").forEach(function(t){t.classList.add("active")}),null===(s=a.closest(".task-process-selected"))||void 0===s||s.classList.add("active");else if("type"==t){var n=e.split("~~")[0],i=e.split("~~")[1];document.querySelectorAll(".task-listing-card").forEach(function(t){t.dataset.type==i&&t.dataset.process==n?t.classList.remove("d-none"):(t.classList.remove("d-none"),t.classList.add("d-none"))}),document.querySelectorAll(".sub-task-lists.active").forEach(function(t){t.classList.remove("active")}),a.classList.add("active")}else if("all"==t){var o;document.querySelectorAll(".task-listing-card").forEach(function(t){t.classList.remove("d-none"),t.classList.remove("active")}),document.querySelectorAll(".task-process-selection.active,.sub-task-lists.active,.task-process-selected.active").forEach(function(t){t.classList.remove("active")}),a.querySelectorAll(".task-process-selection").forEach(function(t){t.classList.add("active")}),null===(o=a.closest(".task-process-selected"))||void 0===o||o.classList.add("active")}}},{key:"viewAllFilters",value:function(){event.target.classList.contains("expanded")?(document.querySelector("#Active-List-container").classList.add("horizontal"),event.target.setAttribute("title","View All"),event.target.innerHTML="View All",event.target.classList.remove("expanded")):(document.querySelector("#Active-List-container").classList.remove("horizontal"),event.target.setAttribute("title","Collapse"),event.target.innerHTML="Collapse",event.target.classList.add("expanded"))}},{key:"setApprovalReasons",value:function(){for(var t=document.querySelectorAll(".approval-radio"),e=0;e<t.length;e++)t[e].addEventListener("change",function(){var t,e,a=this.getAttribute("name"),s=this.getAttribute("id");document.querySelectorAll(".".concat(a)).forEach(function(t){t.classList.remove("active")}),null===(t=this.closest(".approval-radio-group"))||void 0===t||null===(e=t.querySelectorAll(".btn-toggle"))||void 0===e||e.forEach(function(t){t.classList.remove("active")}),this.checked&&(document.querySelectorAll(".".concat(a," .approval-controls")).forEach(function(t){t.classList.contains("d-none")||t.classList.add("d-none")}),document.querySelectorAll(".".concat(a,' .approval-controls[data-tasktype="').concat(this.dataset.tasktype,'"]')).forEach(function(t){t.classList.remove("d-none")}),document.querySelector('[for="'.concat(s,'"]')).classList.add("active"))})}},{key:"toggleFilters",value:function(){var t=document.querySelector(".filter-wrapper");t.classList.contains("d-none")?t.classList.remove("d-none"):t.classList.add("d-none")}},{key:"toggleTask",value:function(t){document.querySelectorAll(".taskSubrow".concat(t)).forEach(function(e){if(!e.classList.contains("data-fetched")){var a=e.dataset.displaymcontent;if(""==a||"null"==a);else if((a=decodeURI(a)).indexOf("{")>-1||a.indexOf("[")>-1){var s=e.closest(".HP-ActiveList-Items");(new AxHTML).parse({name:t,input:a,data:{},pageVariables:{taskid:t,tasktype:s.getAttribute("data-type"),transid:s.getAttribute("data-transid"),keyvalue:s.getAttribute("data-keyvalue")},container:".taskSubrow".concat(t," span")})}else document.querySelector(".taskSubrow".concat(t," span")).insertAdjacentHTML("beforeend"," ".concat(a," "));e.classList.add("data-fetched")}})}},{key:"checkConfirmation",value:function(t,e,a,s,n){var i,o=n.getAttribute("data-confirmMessage");return taskActionCheck==="".concat(e).concat(a)||""===o||null===o||(i=$.confirm({template:'<div class="jconfirm"><div class="jconfirm-bg jconfirm-bg-h"></div><div class="jconfirm-scrollpane"><div class="jconfirm-row"><div class="jconfirm-cell"><div class="jconfirm-holder"><div class="jc-bs3-container"><div class="jc-bs3-row"><div class="jconfirm-box-container jconfirm-animated custom-jconfirm-box"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="jconfirm-closeIcon">&times;</div><div class="jconfirm-title-c"><span class="jconfirm-icon-c"></span><span class="jconfirm-title"></span></div><div class="jconfirm-content-pane"><div class="jconfirm-content"></div></div><div class="jconfirm-buttons"></div><div class="jconfirm-clear"></div></div></div></div></div></div></div></div></div></div>',title:o,content:"",buttons:{buttonA:{text:"Yes",btnClass:"btn btn-primary",action:function(){i.close(),taskActionCheck="".concat(e).concat(a),ShowDimmer(!0),t.doTaskAction(e,a,s,n)}},buttonB:{text:"No",btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){i.close(),taskActionCheck=!1,ShowDimmer(!1)}}},onClose:function(){ShowDimmer(!1)}}),!1)}},{key:"checkPopoverConfirmation",value:function(t,e,a,s){var n,i;taskActionCheck!=="".concat(t).concat(e)&&""!==s&&null!==s&&(i=$.confirm({template:'<div class="jconfirm"><div class="jconfirm-bg jconfirm-bg-h"></div><div class="jconfirm-scrollpane"><div class="jconfirm-row"><div class="jconfirm-cell"><div class="jconfirm-holder"><div class="jc-bs3-container"><div class="jc-bs3-row"><div class="jconfirm-box-container jconfirm-animated custom-jconfirm-box"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="jconfirm-closeIcon">&times;</div><div class="jconfirm-title-c"><span class="jconfirm-icon-c"></span><span class="jconfirm-title"></span></div><div class="jconfirm-content-pane"><div class="jconfirm-content"></div></div><div class="jconfirm-buttons"></div><div class="jconfirm-clear"></div></div></div></div></div></div></div></div></div></div>',title:s,content:"",buttons:{buttonA:{text:"Yes",btnClass:"btn btn-primary",action:function(){i.close(),taskActionCheck="".concat(t).concat(e),setTimeout(function(){a.focus(),a.click()},1e3)}},buttonB:{text:"No",btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){var t;i.close(),null===(t=KTMenu.getInstance(a))||void 0===t||t.hide(),taskActionCheck=!1,ShowDimmer(!1)}}},onClose:function(){ShowDimmer(!1)}}),null===(n=KTMenu.getInstance(a))||void 0===n||n.hide())}}]),t}(),axTasksObj=new AxTasks;